# ClawFeed PRD 1.2: ä¸ªæ€§åŒ– Digest ç”Ÿæˆ

> **ç‰ˆæœ¬**: v1.2 Draft
> **æ—¥æœŸ**: 2026-02-25
> **å‰ç½®ä¾èµ–**: PR #15 (raw_items é‡‡é›†ç®¡é“) å·²åˆå¹¶
> **è´Ÿè´£äºº**: Jessie (å¼€å‘) / Lisa (æµ‹è¯•) / Kevin (å®¡æ‰¹)

---

## 1. èƒŒæ™¯ä¸åŠ¨æœº

ClawFeed å½“å‰çš„ digest ç”Ÿæˆæ˜¯**å…¨å±€æ€§çš„**â€”â€”æ‰€æœ‰ç”¨æˆ·çœ‹åˆ°åŒä¸€ä»½å†…å®¹ã€‚è™½ç„¶ Phase 1.1 å·²ç»å®Œæˆäº†å…³é”®åŸºç¡€è®¾æ–½ï¼š

- **raw_items é‡‡é›†ç®¡é“**ï¼ˆ`src/collector.mjs`ï¼‰å·²ä¸Šçº¿ï¼Œèƒ½ä» RSS/HN/Reddit/GitHub Trending/Website äº”ç±»æºå®šæ—¶é‡‡é›†åŸå§‹å†…å®¹åˆ° `raw_items` è¡¨
- **user_subscriptions è¡¨**å·²å­˜åœ¨ï¼Œç”¨æˆ·å¯è®¢é˜…/é€€è®¢ sources
- **digests è¡¨å·²æœ‰ user_id å­—æ®µ**ï¼ˆ`004_feed.sql` è¿ç§»æ·»åŠ ï¼‰ï¼Œä½†å½“å‰æ‰€æœ‰ digest çš„ `user_id` å‡ä¸º NULLï¼ˆç³»ç»Ÿçº§ digestï¼‰
- **`/api/raw-items/for-digest` ç«¯ç‚¹**å·²å®ç°ï¼Œèƒ½æŒ‰ç”¨æˆ·è®¢é˜…è¿‡æ»¤ raw_items

ç„¶è€Œï¼Œä» raw_items åˆ°ä¸ªæ€§åŒ– digest çš„**æœ€åä¸€å…¬é‡Œ**å°šæœªæ‰“é€šï¼š

1. **Digest ç”Ÿæˆä¸æ¶ˆè´¹ raw_items** â€” ç°æœ‰ digest ä»ç”±å¤–éƒ¨è„šæœ¬é€šè¿‡ `POST /api/digests` ç›´æ¥å†™å…¥ï¼Œä¸ç»è¿‡ raw_items ç­›é€‰
2. **Digest æ— ç”¨æˆ·å½’å±** â€” æ‰€æœ‰ digest çš„ `user_id = NULL`ï¼Œå‰ç«¯é€šè¿‡ `listDigestsByUser` æŸ¥è¯¢æ—¶å®é™…è¿”å›çš„æ˜¯å…¨å±€ digestï¼ˆ`WHERE user_id = ? OR user_id IS NULL`ï¼‰
3. **æ–°ç”¨æˆ·æ— å¼•å¯¼** â€” æ³¨å†Œåè™½è‡ªåŠ¨è®¢é˜… public sourcesï¼ˆ`upsertUser` ä¸­çš„é€»è¾‘ï¼‰ï¼Œä½†ç”¨æˆ·çœ‹åˆ°çš„ digest å†…å®¹ä¸è®¢é˜…æ— å…³
4. **è®¢é˜…çš„æ„ä¹‰ä¸å®Œæ•´** â€” ç”¨æˆ·èŠ±æ—¶é—´ç®¡ç†è®¢é˜…ï¼Œä½† digest å†…å®¹ä¸éšè®¢é˜…å˜åŒ–ï¼Œç ´åäº†é¢„æœŸ

**æ ¸å¿ƒçŸ›ç›¾**ï¼šç”¨æˆ·å·²ç»èƒ½ç®¡ç†"çœ‹ä»€ä¹ˆæº"ï¼Œä½†è¿˜ä¸èƒ½å¾—åˆ°"åŸºäºè¿™äº›æºç”Ÿæˆçš„ä¸ªæ€§åŒ–å†…å®¹"ã€‚æœ¬ PRD çš„ç›®æ ‡æ˜¯è¡¥ä¸Šè¿™ä¸€ç¯ã€‚

---

## 2. ç›®æ ‡

| # | ç›®æ ‡ | è¡¡é‡æ ‡å‡† |
|---|------|---------|
| G1 | æ¯ä¸ªç™»å½•ç”¨æˆ·çœ‹åˆ°åŸºäºè‡ªå·±è®¢é˜…çš„ digest | 100% çš„æ–° digest å…³è” user_idï¼Œå†…å®¹ä»…æ¥è‡ªè¯¥ç”¨æˆ·è®¢é˜…çš„ sources |
| G2 | æ–°ç”¨æˆ· 0 é…ç½®å³å¯è·å¾—æœ‰ä»·å€¼çš„ digest | æ³¨å†Œå < 5 åˆ†é’Ÿå†…èƒ½çœ‹åˆ°é¦–ä»½ä¸ªæ€§åŒ– digestï¼ˆæ¥è‡ªé»˜è®¤æ¨èåŒ…ï¼‰ |
| G3 | æœªç™»å½•ç”¨æˆ·ä»èƒ½ä½“éªŒäº§å“ | æœªç™»å½•ç”¨æˆ·çœ‹åˆ°"é»˜è®¤æ¨èåŒ…"å¯¹åº”çš„ digestï¼Œä½œä¸ºæ³¨å†Œè¯±é¥µ |
| G4 | ç›¸åŒè®¢é˜…ç»„åˆçš„ç”¨æˆ·å…±äº« digestï¼ˆæˆæœ¬æ§åˆ¶ï¼‰ | ä¸ºåç»­ Phase 3.4 çš„ `subscription_hash` ç¼“å­˜é“ºè·¯ï¼Œæœ¬æœŸæ•°æ®æ¨¡å‹éœ€é¢„ç•™å­—æ®µ |

---

## 3. ç”¨æˆ·æ•…äº‹

### US-1: æ–°ç”¨æˆ·é¦–æ¬¡ä½“éªŒ
> ä½œä¸ºä¸€å**æ–°æ³¨å†Œç”¨æˆ·**ï¼Œæˆ‘å¸Œæœ›æ³¨å†Œåç«‹åˆ»çœ‹åˆ°ä¸€ä»½æœ‰å†…å®¹çš„ digestï¼Œè€Œä¸æ˜¯ç©ºç™½é¡µï¼Œè¿™æ ·æˆ‘æ‰ä¼šè§‰å¾—äº§å“æœ‰ç”¨ã€‚

**éªŒæ”¶åœºæ™¯**ï¼šç”¨æˆ· Google ç™»å½• â†’ è‡ªåŠ¨è·å¾—"é»˜è®¤æ¨èåŒ…"ä¸­çš„ source è®¢é˜… â†’ é¦–é¡µå±•ç¤ºåŸºäºè¿™äº› sources çš„æœ€æ–° digestã€‚

### US-2: è®¢é˜…é©±åŠ¨çš„ä¸ªæ€§åŒ– digest
> ä½œä¸ºä¸€å**å·²æœ‰ç”¨æˆ·**ï¼Œæˆ‘å¸Œæœ›æˆ‘çš„ digest åªåŒ…å«æˆ‘è®¢é˜…çš„ sources çš„å†…å®¹ï¼Œè¿™æ ·æˆ‘ä¸ä¼šè¢«ä¸æ„Ÿå…´è¶£çš„ä¿¡æ¯æ·¹æ²¡ã€‚

**éªŒæ”¶åœºæ™¯**ï¼šç”¨æˆ·å–æ¶ˆè®¢é˜… source A â†’ ä¸‹ä¸€æ¬¡ digest ç”Ÿæˆæ—¶ä¸å†åŒ…å« source A çš„å†…å®¹ã€‚

### US-3: æœªç™»å½•ç”¨æˆ·ä½“éªŒ
> ä½œä¸ºä¸€å**æœªç™»å½•çš„è®¿å®¢**ï¼Œæˆ‘å¸Œæœ›èƒ½çœ‹åˆ°ä¸€ä»½æ ·æ¿ digest æ¥äº†è§£äº§å“ä»·å€¼ï¼Œè¿™æ ·æˆ‘æ‰ä¼šå†³å®šæ˜¯å¦æ³¨å†Œã€‚

**éªŒæ”¶åœºæ™¯**ï¼šè®¿å®¢æ‰“å¼€ ClawFeed â†’ çœ‹åˆ°"é»˜è®¤æ¨èåŒ…"å¯¹åº”çš„ digest â†’ é¡¶éƒ¨æœ‰æ³¨å†Œå¼•å¯¼ bannerã€‚

### US-4: ç©ºçŠ¶æ€å¼•å¯¼
> ä½œä¸ºä¸€å**å–æ¶ˆäº†æ‰€æœ‰è®¢é˜…çš„ç”¨æˆ·**ï¼Œæˆ‘å¸Œæœ›çœ‹åˆ°æœ‰æ„ä¹‰çš„å¼•å¯¼è€Œä¸æ˜¯ç©ºç™½é¡µï¼Œè¿™æ ·æˆ‘çŸ¥é“è¯¥æ€ä¹ˆæ¢å¤ã€‚

**éªŒæ”¶åœºæ™¯**ï¼šç”¨æˆ·åˆ é™¤æ‰€æœ‰è®¢é˜… â†’ digest é¡µé¢æ˜¾ç¤ºç©ºçŠ¶æ€å¡ç‰‡ â†’ æä¾›"å®‰è£…æ¨èåŒ…"å’Œ"æ·»åŠ è‡ªå®šä¹‰æº"ä¸¤ä¸ªå…¥å£ã€‚

### US-5: Feed è¾“å‡ºä¸ªæ€§åŒ–
> ä½œä¸ºä¸€å**ä½¿ç”¨ RSS é˜…è¯»å™¨çš„ç”¨æˆ·**ï¼Œæˆ‘å¸Œæœ› `/feed/<slug>.json` å’Œ `/feed/<slug>.rss` è¾“å‡ºçš„æ˜¯æˆ‘çš„ä¸ªæ€§åŒ– digestï¼Œè€Œä¸æ˜¯å…¨å±€ digestã€‚

**éªŒæ”¶åœºæ™¯**ï¼šç”¨æˆ·çš„ RSS feed ä»…åŒ…å«å…³è”åˆ°è¯¥ user_id çš„ digestï¼ˆå·²æœ‰ `listDigestsByUser` é€»è¾‘ï¼Œä½†éœ€è¦ digest çœŸæ­£å…³è” user_id æ‰èƒ½ç”Ÿæ•ˆï¼‰ã€‚

---

## 4. åŠŸèƒ½éœ€æ±‚

### 4.1 é»˜è®¤æ¨èåŒ…æœºåˆ¶

**ç°çŠ¶**ï¼š`upsertUser` ä¸­æœ‰ä¸€è¡Œé€»è¾‘ï¼š`INSERT OR IGNORE INTO user_subscriptions ... SELECT ?, id FROM sources WHERE is_public = 1`ï¼Œå³æ–°ç”¨æˆ·è‡ªåŠ¨è®¢é˜…æ‰€æœ‰ public sourcesã€‚

**æ”¹è¿›æ–¹æ¡ˆ**ï¼š

- **4.1.1** å¼•å…¥"é»˜è®¤æ¨èåŒ…"æ¦‚å¿µã€‚åœ¨ `source_packs` è¡¨ä¸­è®¾å®šä¸€ä¸ª pack ä¸ºç³»ç»Ÿé»˜è®¤ï¼ˆé€šè¿‡ `config` è¡¨çš„ `default_pack_slug` é”®æŒ‡å®šï¼‰ã€‚
- **4.1.2** æ–°ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œè‡ªåŠ¨å®‰è£…é»˜è®¤æ¨èåŒ…ä¸­çš„ sourcesï¼ˆæ›¿ä»£å½“å‰"è®¢é˜…æ‰€æœ‰ public sources"çš„ç²—æ”¾é€»è¾‘ï¼‰ã€‚
- **4.1.3** ç«™é•¿å¯é€šè¿‡ `PUT /api/config` è®¾ç½® `default_pack_slug`ï¼ŒæŒ‡å‘ä»»æ„ public packã€‚
- **4.1.4** è‹¥æœªé…ç½® `default_pack_slug`ï¼Œå›é€€åˆ°å½“å‰è¡Œä¸ºï¼ˆè®¢é˜…æ‰€æœ‰ public sourcesï¼‰ã€‚

### 4.2 Digest ç”Ÿæˆç®¡é“ (raw_items â†’ digest)

**ç°çŠ¶**ï¼šDigest é€šè¿‡å¤–éƒ¨è„šæœ¬ç›´æ¥ `POST /api/digests` å†™å…¥ï¼Œä¸æ¶ˆè´¹ raw_itemsã€‚

**æ”¹è¿›æ–¹æ¡ˆ**ï¼š

- **4.2.1** æ–°å¢ `src/generator.mjs` æ¨¡å—ï¼Œè´Ÿè´£ä» raw_items ç”Ÿæˆä¸ªæ€§åŒ– digestã€‚
- **4.2.2** ç”Ÿæˆæµç¨‹ï¼š
  1. æŸ¥è¯¢æ‰€æœ‰éœ€è¦ç”Ÿæˆ digest çš„ç”¨æˆ·ï¼ˆæœ‰æ´»è·ƒè®¢é˜…ä¸”ä¸Šæ¬¡ digest ç”Ÿæˆå·²è¶…è¿‡å‘¨æœŸï¼‰
  2. å¯¹æ¯ä¸ªç”¨æˆ·ï¼Œå–å…¶è®¢é˜…çš„ source_ids
  3. ç”¨ `listRawItemsForDigest(db, sourceIds, { since: lastDigestTime })` è·å–å¾…å¤„ç† raw_items
  4. è‹¥ raw_items ä¸ºç©ºï¼Œè·³è¿‡è¯¥ç”¨æˆ·
  5. å°† raw_items å‘é€ç»™ LLM æŒ‰ `templates/digest-prompt.md` ç”Ÿæˆæ‘˜è¦
  6. è°ƒç”¨ `createDigest(db, { type, content, metadata, user_id })` å†™å…¥ï¼Œ**å…³è” user_id**
- **4.2.3** æ”¯æŒæŒ‰ digest ç±»å‹é…ç½®ç”Ÿæˆå‘¨æœŸï¼š
  - `4h`: æ¯ 4 å°æ—¶
  - `daily`: æ¯å¤© 08:00 SGT
  - `weekly`: æ¯å‘¨ä¸€ 08:00 SGT
- **4.2.4** `metadata` å­—æ®µè®°å½•æœ¬æ¬¡ digest ä½¿ç”¨äº†å“ªäº› source_ids å’Œ raw_item_idsï¼Œç”¨äºå¯è¿½æº¯æ€§ã€‚
- **4.2.5** ä¸º subscription_hash ç¼“å­˜é¢„ç•™ï¼šç”Ÿæˆå‰è®¡ç®— `SHA256(sorted(source_ids))` å­˜å…¥ metadataï¼Œç›¸åŒ hash çš„ç”¨æˆ·å¯å¤ç”¨åŒä¸€ digestï¼ˆæœ¬æœŸä»…è®°å½•ï¼Œä¸åšç¼“å­˜é€»è¾‘ï¼‰ã€‚

### 4.3 Digest ä¸ user_id å…³è”

**ç°çŠ¶**ï¼š`digests` è¡¨å·²æœ‰ `user_id` åˆ—ï¼ˆæ¥è‡ª `004_feed.sql`ï¼‰ï¼Œä½†å…¨éƒ¨ä¸º NULLã€‚

**æ”¹è¿›æ–¹æ¡ˆ**ï¼š

- **4.3.1** `generator.mjs` ç”Ÿæˆçš„æ‰€æœ‰ digest å¿…é¡»å…³è” user_idã€‚
- **4.3.2** ä¸ºæœªç™»å½•ç”¨æˆ·ç”Ÿæˆä¸€ä»½"ç³»ç»Ÿ digest"ï¼ˆ`user_id = NULL`ï¼‰ï¼Œå†…å®¹åŸºäºé»˜è®¤æ¨èåŒ…çš„ sourcesã€‚è¯¥ digest åŒæ—¶ä½œä¸ºæ–°æ³¨å†Œç”¨æˆ·çš„é¦–ä»½å†…å®¹ã€‚
- **4.3.3** `POST /api/digests` ç«¯ç‚¹å¢åŠ å¯é€‰ `user_id` å‚æ•°ï¼ˆAPI Key é‰´æƒï¼‰ï¼Œå…è®¸å¤–éƒ¨ç”Ÿæˆå™¨æŒ‡å®šç›®æ ‡ç”¨æˆ·ã€‚

### 4.4 å‰ç«¯æŒ‰ç”¨æˆ·å±•ç¤º

**ç°çŠ¶**ï¼š`GET /api/digests` è¿”å›å…¨å±€ digest åˆ—è¡¨ï¼Œä¸åŒºåˆ†ç”¨æˆ·ã€‚å‰ç«¯ digest åˆ—è¡¨é¡µå±•ç¤ºåŒä¸€ä»½å†…å®¹ã€‚

**æ”¹è¿›æ–¹æ¡ˆ**ï¼š

- **4.4.1** å·²ç™»å½•ç”¨æˆ·ï¼š`GET /api/digests` é»˜è®¤è¿”å›è¯¥ç”¨æˆ·çš„ digestï¼ˆ`WHERE user_id = ?`ï¼‰+ ç³»ç»Ÿ digestï¼ˆ`WHERE user_id IS NULL`ï¼‰ä½œä¸ºå›é€€ã€‚
- **4.4.2** æœªç™»å½•ç”¨æˆ·ï¼š`GET /api/digests` ä»…è¿”å›ç³»ç»Ÿ digestï¼ˆ`WHERE user_id IS NULL`ï¼‰ã€‚
- **4.4.3** æ–°å¢æŸ¥è¯¢å‚æ•° `mine=1`ï¼šä»…è¿”å›ä¸¥æ ¼å±äºå½“å‰ç”¨æˆ·çš„ digestï¼ˆä¸å«ç³»ç»Ÿ digestï¼‰ï¼Œç”¨äºç”¨æˆ·ç¡®è®¤ä¸ªæ€§åŒ–æ˜¯å¦ç”Ÿæ•ˆã€‚

### 4.5 ç©ºçŠ¶æ€å¼•å¯¼

**æ”¹è¿›æ–¹æ¡ˆ**ï¼š

- **4.5.1** å½“ç”¨æˆ·æ— è®¢é˜…æ—¶ï¼Œdigest åˆ—è¡¨é¡µæ˜¾ç¤ºç©ºçŠ¶æ€å¡ç‰‡ï¼š
  - ä¸»æ ‡é¢˜ï¼š"ä½ è¿˜æ²¡æœ‰è®¢é˜…ä»»ä½•ä¿¡æ¯æº"
  - æ¨èæ“ä½œ 1ï¼š"å®‰è£…æ¨èåŒ…" â†’ è·³è½¬åˆ° Packs é¡µé¢ï¼Œé«˜äº®é»˜è®¤æ¨èåŒ…
  - æ¨èæ“ä½œ 2ï¼š"æ·»åŠ è‡ªå®šä¹‰æº" â†’ è·³è½¬åˆ° Sources é¡µé¢çš„æ·»åŠ  URL è¾“å…¥æ¡†
- **4.5.2** å½“ç”¨æˆ·æœ‰è®¢é˜…ä½†è¿˜æ²¡æœ‰ digest ç”Ÿæˆæ—¶ï¼Œæ˜¾ç¤ºç­‰å¾…çŠ¶æ€ï¼š
  - "ä½ çš„ç¬¬ä¸€ä»½ä¸ªæ€§åŒ–ç®€æŠ¥æ­£åœ¨ç”Ÿæˆä¸­ï¼Œé€šå¸¸éœ€è¦å‡ åˆ†é’Ÿ..."
  - æ˜¾ç¤ºå·²è®¢é˜…çš„ source åˆ—è¡¨ä½œä¸ºç¡®è®¤
- **4.5.3** å½“ç”¨æˆ·çš„è®¢é˜… sources å…¨éƒ¨é‡‡é›†å¤±è´¥æ—¶ï¼Œæ˜¾ç¤ºè¯Šæ–­æç¤ºï¼š
  - "ä½ è®¢é˜…çš„ä¿¡æ¯æºæš‚æ—¶æ— æ³•é‡‡é›†ï¼Œè¯·æ£€æŸ¥æºçŠ¶æ€æˆ–è”ç³»æˆ‘ä»¬"

---

## 5. æŠ€æœ¯æ–¹æ¡ˆ

### 5.1 æ–°å¢æ¨¡å—: `src/generator.mjs`

```
src/generator.mjs
â”œâ”€â”€ getUsersDueForDigest(db, type)    // æŸ¥è¯¢éœ€è¦ç”Ÿæˆ digest çš„ç”¨æˆ·åˆ—è¡¨
â”œâ”€â”€ buildDigestInput(db, userId, type) // è·å–ç”¨æˆ·è®¢é˜…çš„ raw_items
â”œâ”€â”€ generateDigest(items, type)        // è°ƒç”¨ LLM ç”Ÿæˆæ‘˜è¦æ–‡æœ¬
â”œâ”€â”€ generateForUser(db, userId, type)  // å•ç”¨æˆ·å®Œæ•´ç”Ÿæˆæµç¨‹
â”œâ”€â”€ generateAll(db, type)              // æ‰¹é‡ä¸ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç”¨æˆ·ç”Ÿæˆ
â””â”€â”€ main()                             // CLI: --type 4h|daily|weekly
```

**è¿è¡Œæ–¹å¼**ï¼šç‹¬ç«‹è¿›ç¨‹ï¼Œç”± cron/PM2 è°ƒåº¦ï¼Œä¸é˜»å¡ API serverã€‚

```bash
node src/generator.mjs --type 4h          # ä¸ºæ‰€æœ‰ç”¨æˆ·ç”Ÿæˆ 4h digest
node src/generator.mjs --type daily       # daily digest
node src/generator.mjs --user 42 --type 4h # æŒ‡å®šç”¨æˆ·
```

### 5.2 LLM è°ƒç”¨

- ä½¿ç”¨ç¯å¢ƒå˜é‡ `LLM_API_KEY` / `LLM_API_URL` / `LLM_MODEL` é…ç½®
- Prompt æ¨¡æ¿æ¥è‡ª `templates/digest-prompt.md`ï¼ˆå·²å­˜åœ¨ï¼‰
- è¾“å…¥æ ¼å¼ï¼šå°† raw_items åºåˆ—åŒ–ä¸ºç»“æ„åŒ–æ–‡æœ¬ï¼ŒæŒ‰ source åˆ†ç»„
- è¾“å‡ºæ ¼å¼ï¼šMarkdown æ–‡æœ¬ï¼Œå†™å…¥ `digests.content`
- è¶…æ—¶ / é‡è¯•ï¼šå•æ¬¡è°ƒç”¨ 60s è¶…æ—¶ï¼Œå¤±è´¥é‡è¯• 1 æ¬¡
- æˆæœ¬æ§åˆ¶ï¼šmetadata ä¸­è®°å½• token ç”¨é‡

### 5.3 æ•°æ®æµå…¨è§ˆ

```
[Collector è¿›ç¨‹ - æ¯ 5 åˆ†é’Ÿ]
  sources è¡¨ (is_active=1, due for fetch)
    â†’ å„ fetcher (RSS/HN/Reddit/...)
    â†’ raw_items è¡¨ (å»é‡å†™å…¥)

[Generator è¿›ç¨‹ - cron è°ƒåº¦]
  users è¡¨ (æœ‰æ´»è·ƒè®¢é˜…)
    â†’ user_subscriptions â†’ source_ids
    â†’ raw_items è¡¨ (æŒ‰ source_ids + since è¿‡æ»¤)
    â†’ LLM ç”Ÿæˆæ‘˜è¦
    â†’ digests è¡¨ (å…³è” user_id)

[API Server - å®æ—¶]
  GET /api/digests â†’ æŒ‰ req.user.id è¿‡æ»¤
  GET /feed/:slug.json â†’ æŒ‰ user_id è¿‡æ»¤
```

### 5.4 å¯¹ç°æœ‰ä»£ç çš„ä¿®æ”¹

#### `src/db.mjs` æ–°å¢/ä¿®æ”¹å‡½æ•°

```javascript
// æ–°å¢ï¼šè·å–éœ€è¦ç”Ÿæˆ digest çš„ç”¨æˆ·
export function getUsersDueForDigest(db, type, intervalHours) { ... }

// æ–°å¢ï¼šè·å–ç”¨æˆ·çš„è®¢é˜… source_idsï¼ˆä»…æ´»è·ƒæœªåˆ é™¤ï¼‰
export function getActiveSubscriptionSourceIds(db, userId) { ... }

// æ–°å¢ï¼šè·å–ç”¨æˆ·ä¸Šæ¬¡ digest çš„æ—¶é—´
export function getLastDigestTime(db, userId, type) { ... }

// ä¿®æ”¹ï¼šcreateDigest å·²æ”¯æŒ user_idï¼ˆå½“å‰ä»£ç æœªä¼ å…¥è¯¥å­—æ®µï¼Œéœ€ç¡®è®¤ SQLï¼‰
export function createDigest(db, { type, content, metadata, user_id, created_at }) { ... }
```

#### `src/server.mjs` ä¿®æ”¹

```javascript
// ä¿®æ”¹ GET /api/digests: å¢åŠ ç”¨æˆ·è¿‡æ»¤é€»è¾‘
if (req.method === 'GET' && path === '/api/digests') {
  if (req.user) {
    // å·²ç™»å½•ï¼šè¿”å›ç”¨æˆ·çš„ digest + ç³»ç»Ÿ digest
    return json(res, listDigestsByUser(db, req.user.id, { type, limit, offset }));
  } else {
    // æœªç™»å½•ï¼šä»…è¿”å›ç³»ç»Ÿ digest (user_id IS NULL)
    return json(res, listDigests(db, { type, limit, offset, systemOnly: true }));
  }
}

// ä¿®æ”¹ POST /api/digests: æ”¯æŒ user_id å‚æ•°
const result = createDigest(db, { ...body, user_id: body.user_id || null });
```

#### `src/db.mjs` ä¸­ `upsertUser` ä¿®æ”¹

```javascript
// æ›¿æ¢å½“å‰çš„ "è®¢é˜…æ‰€æœ‰ public sources" é€»è¾‘
// æ”¹ä¸ºï¼šå®‰è£…é»˜è®¤æ¨èåŒ…
const defaultPackSlug = getConfig(db).default_pack_slug;
if (defaultPackSlug) {
  const pack = getPackBySlug(db, defaultPackSlug);
  if (pack) {
    // å¤ç”¨ pack install é€»è¾‘
    installPackForUser(db, newUser.id, pack);
  }
} else {
  // å›é€€ï¼šè®¢é˜…æ‰€æœ‰ public sourcesï¼ˆç°æœ‰è¡Œä¸ºï¼‰
  db.prepare('INSERT OR IGNORE INTO user_subscriptions ...').run(newUser.id);
}
```

---

## 6. æ•°æ®æ¨¡å‹

### 6.1 ç°æœ‰è¡¨ï¼ˆæ— éœ€ä¿®æ”¹ schemaï¼‰

| è¡¨ | ç›¸å…³å­—æ®µ | è¯´æ˜ |
|---|---------|------|
| `digests` | `user_id INTEGER` | å·²æœ‰ï¼Œ`004_feed.sql` æ·»åŠ ã€‚NULL = ç³»ç»Ÿ digest |
| `user_subscriptions` | `user_id, source_id` | å·²æœ‰ï¼Œ`006_subscriptions.sql` |
| `raw_items` | `source_id, title, url, content, ...` | å·²æœ‰ï¼Œ`010_raw_items.sql` |
| `source_packs` | `slug, sources_json, is_public` | å·²æœ‰ï¼Œ`005_source_packs.sql` |
| `config` | `key, value` | å·²æœ‰ï¼Œ`001_init.sql`ã€‚æ–°å¢ key: `default_pack_slug` |

### 6.2 æ–°å¢ migration: `011_digest_generation.sql`

```sql
-- è®°å½•æ¯æ¬¡ digest ç”Ÿæˆçš„å…ƒæ•°æ®ï¼Œç”¨äºè°ƒåº¦å’Œå»é‡
-- ä¸æ–°å»ºè¡¨ï¼Œåˆ©ç”¨ç°æœ‰ digests.metadata å­—æ®µå­˜å‚¨ï¼š
--   subscription_hash: SHA256(sorted(source_ids))
--   source_ids: [1, 3, 7, ...]
--   raw_item_count: 45
--   token_usage: { prompt: 1200, completion: 800 }

-- ä¸º digest æŒ‰ç”¨æˆ·+ç±»å‹æŸ¥è¯¢åŠ é€Ÿ
CREATE INDEX IF NOT EXISTS idx_digests_user_type_created
  ON digests(user_id, type, created_at DESC);

-- config è¡¨æ–°å¢é»˜è®¤æ¨èåŒ…é…ç½®ï¼ˆé€šè¿‡ API å†™å…¥ï¼Œä¸éœ€è¦ DDLï¼‰
-- key: 'default_pack_slug', value: 'ai-tech-starter'
```

### 6.3 æ•°æ®å…³ç³»å›¾

```
users
  â”œâ”€â”€ user_subscriptions â”€â”€â†’ sources â”€â”€â†’ raw_items
  â””â”€â”€ digests (user_id)
          â””â”€â”€ metadata.source_ids â”€â”€â†’ sources
          â””â”€â”€ metadata.subscription_hash (é¢„ç•™)

source_packs
  â””â”€â”€ sources_json (åŒ…å« source å®šä¹‰)
  â””â”€â”€ config['default_pack_slug'] æŒ‡å‘æŸä¸ª pack.slug
```

---

## 7. API è®¾è®¡

### 7.1 ä¿®æ”¹ç°æœ‰ç«¯ç‚¹

#### `GET /api/digests`

**å˜æ›´**ï¼šå¢åŠ ç”¨æˆ·æ„ŸçŸ¥é€»è¾‘ã€‚

| åœºæ™¯ | è¡Œä¸º | SQL æ¡ä»¶ |
|------|------|---------|
| å·²ç™»å½• | è¿”å›ç”¨æˆ·ä¸ªæ€§åŒ– digest + ç³»ç»Ÿ digest | `WHERE user_id = ? OR user_id IS NULL` |
| æœªç™»å½• | ä»…è¿”å›ç³»ç»Ÿ digest | `WHERE user_id IS NULL` |
| `?mine=1` (å·²ç™»å½•) | ä»…è¿”å›è¯¥ç”¨æˆ·çš„ digest | `WHERE user_id = ?` |

**æ³¨æ„**ï¼šç°æœ‰ `listDigests` å‡½æ•°ä¸æ”¯æŒ user è¿‡æ»¤ï¼Œéœ€æ–°å¢ `listDigestsForUser` æˆ–å¤ç”¨ `listDigestsByUser`ã€‚

#### `POST /api/digests`

**å˜æ›´**ï¼šæ”¯æŒ `user_id` å­—æ®µã€‚

```json
// è¯·æ±‚ä½“ï¼ˆAPI Key é‰´æƒï¼‰
{
  "type": "4h",
  "content": "...",
  "metadata": "{}",
  "user_id": 42       // æ–°å¢ï¼Œå¯é€‰ã€‚NULL = ç³»ç»Ÿ digest
}
```

#### `GET /api/digests` (response)

**å˜æ›´**ï¼šè¿”å›ä¸­å¢åŠ  `is_personalized` æ ‡è®°ã€‚

```json
[
  {
    "id": 123,
    "type": "4h",
    "content": "...",
    "created_at": "2026-02-25 14:00:00",
    "is_personalized": true   // user_id é NULL æ—¶ä¸º true
  }
]
```

### 7.2 æ–°å¢ç«¯ç‚¹

#### `GET /api/digest-status`

**ç”¨é€”**ï¼šå‰ç«¯è½®è¯¢ç”¨æˆ· digest ç”ŸæˆçŠ¶æ€ï¼Œç”¨äºç©ºçŠ¶æ€å¼•å¯¼ã€‚

**é‰´æƒ**ï¼šéœ€ç™»å½•ã€‚

**å“åº”**ï¼š
```json
{
  "has_subscriptions": true,        // ç”¨æˆ·æ˜¯å¦æœ‰æ´»è·ƒè®¢é˜…
  "subscription_count": 5,          // è®¢é˜…æ•°
  "has_digests": true,              // ç”¨æˆ·æ˜¯å¦å·²æœ‰ä¸ªæ€§åŒ– digest
  "last_digest_at": "2026-02-25T14:00:00Z",
  "next_digest_eta": "2026-02-25T18:00:00Z",  // é¢„ä¼°ä¸‹æ¬¡ç”Ÿæˆæ—¶é—´
  "sources_healthy": 4,             // è®¢é˜…ä¸­é‡‡é›†æ­£å¸¸çš„ source æ•°
  "sources_errored": 1              // è®¢é˜…ä¸­é‡‡é›†å¼‚å¸¸çš„ source æ•°
}
```

#### `POST /api/digest/generate` (ç®¡ç†æ¥å£)

**ç”¨é€”**ï¼šæ‰‹åŠ¨è§¦å‘ä¸ºæŒ‡å®šç”¨æˆ·ç”Ÿæˆ digestï¼ˆè°ƒè¯•/ç®¡ç†ç”¨ï¼‰ã€‚

**é‰´æƒ**ï¼šAPI Keyã€‚

**è¯·æ±‚**ï¼š
```json
{
  "user_id": 42,         // å¿…å¡«
  "type": "4h"           // å¿…å¡«
}
```

**å“åº”**ï¼š
```json
{
  "ok": true,
  "digest_id": 456,
  "raw_items_used": 38
}
```

---

## 8. å‰ç«¯å˜æ›´

### 8.1 Digest åˆ—è¡¨é¡µ

| ç»„ä»¶ | å˜æ›´ |
|------|------|
| **Digest å¡ç‰‡** | æ–°å¢"ä¸ªæ€§åŒ–"æ ‡è®°å¾½ç« ï¼ŒåŒºåˆ†ä¸ªæ€§åŒ– digest å’Œç³»ç»Ÿ digest |
| **ç©ºçŠ¶æ€ - æ— è®¢é˜…** | æ–°å¢ç©ºçŠ¶æ€å¡ç‰‡ï¼šæ ‡é¢˜ + "å®‰è£…æ¨èåŒ…"æŒ‰é’® + "æ·»åŠ è‡ªå®šä¹‰æº"æŒ‰é’® |
| **ç©ºçŠ¶æ€ - ç­‰å¾…ç”Ÿæˆ** | æ–°å¢åŠ è½½çŠ¶æ€å¡ç‰‡ï¼šæç¤ºæ­£åœ¨ç”Ÿæˆ + æ˜¾ç¤ºå·²è®¢é˜…çš„ source åç§° |
| **ç™»å½•å¼•å¯¼** | æœªç™»å½•æ—¶åœ¨ digest åˆ—è¡¨é¡¶éƒ¨æ˜¾ç¤º bannerï¼š"ç™»å½•åè·å–ä¸ªæ€§åŒ–å†…å®¹" |

### 8.2 ç©ºçŠ¶æ€å¡ç‰‡è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ ä½ è¿˜æ²¡æœ‰è®¢é˜…ä»»ä½•ä¿¡æ¯æº           â”‚
â”‚                                      â”‚
â”‚  å¼€å§‹æ„å»ºä½ çš„ä¸ªäºº AI ç¼–è¾‘éƒ¨ï¼š        â”‚
â”‚                                      â”‚
â”‚  [ğŸ“¦ å®‰è£…æ¨èåŒ…]   [â• æ·»åŠ è‡ªå®šä¹‰æº]  â”‚
â”‚                                      â”‚
â”‚  ğŸ’¡ æ¨èåŒ…åŒ…å«ç²¾é€‰çš„ç§‘æŠ€/AI ä¿¡æ¯æºï¼Œ  â”‚
â”‚     ä¸€é”®å®‰è£…å³å¯å¼€å§‹æ¥æ”¶ä¸ªæ€§åŒ–ç®€æŠ¥     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â³ ä½ çš„ç¬¬ä¸€ä»½ä¸ªæ€§åŒ–ç®€æŠ¥æ­£åœ¨ç”Ÿæˆä¸­    â”‚
â”‚                                      â”‚
â”‚  å·²è®¢é˜… 5 ä¸ªä¿¡æ¯æºï¼š                 â”‚
â”‚  ğŸ“¡ Hacker News Â· ğŸ‘½ r/programming  â”‚
â”‚  ğŸ¦ @karpathy Â· ğŸ“¡ TechCrunch      â”‚
â”‚  â­ GitHub Trending                  â”‚
â”‚                                      â”‚
â”‚  é€šå¸¸éœ€è¦å‡ åˆ†é’Ÿï¼Œè¯·ç¨å€™...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 Digest å¡ç‰‡ä¸ªæ€§åŒ–æ ‡è®°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜€ï¸ AI ç®€æŠ¥ | 02/25 14:00 SGT   ğŸ¯ For You â”‚
â”‚ ğŸ”¥ Anthropic å‘å¸ƒ Claude 4...              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å³ä¸Šè§’ `ğŸ¯ For You` å¾½ç« è¡¨ç¤ºè¯¥ digest æ˜¯åŸºäºç”¨æˆ·è®¢é˜…ç”Ÿæˆçš„ä¸ªæ€§åŒ–å†…å®¹ã€‚ç³»ç»Ÿ digest ä¸æ˜¾ç¤ºè¯¥å¾½ç« ã€‚

---

## 9. éªŒæ”¶æ ‡å‡†

### æ ¸å¿ƒåŠŸèƒ½

- [ ] **AC-1**: `generator.mjs` èƒ½ä¸ºå•ä¸ªç”¨æˆ·ç”Ÿæˆ digestï¼Œcontent ä»…åŒ…å«è¯¥ç”¨æˆ·è®¢é˜… sources çš„ raw_items
- [ ] **AC-2**: ç”Ÿæˆçš„ digest çš„ `user_id` å­—æ®µæ­£ç¡®å…³è”åˆ°ç›®æ ‡ç”¨æˆ·
- [ ] **AC-3**: `generator.mjs --type 4h` æ‰¹é‡ä¸ºæ‰€æœ‰æœ‰æ´»è·ƒè®¢é˜…çš„ç”¨æˆ·ç”Ÿæˆ digest
- [ ] **AC-4**: ç³»ç»Ÿ digestï¼ˆ`user_id = NULL`ï¼‰åŸºäºé»˜è®¤æ¨èåŒ…çš„ sources ç”Ÿæˆ
- [ ] **AC-5**: `metadata` å­—æ®µåŒ…å« `subscription_hash`ã€`source_ids`ã€`raw_item_count`

### é»˜è®¤æ¨èåŒ…

- [ ] **AC-6**: `config` è¡¨å¯è®¾ç½® `default_pack_slug`
- [ ] **AC-7**: æ–°ç”¨æˆ·æ³¨å†Œæ—¶è‡ªåŠ¨å®‰è£…é»˜è®¤æ¨èåŒ…ï¼ˆè€Œéæ‰€æœ‰ public sourcesï¼‰
- [ ] **AC-8**: è‹¥ `default_pack_slug` æœªè®¾ç½®ï¼Œå›é€€åˆ°è®¢é˜…æ‰€æœ‰ public sources

### API

- [ ] **AC-9**: å·²ç™»å½•ç”¨æˆ· `GET /api/digests` è¿”å›ä¸ªæ€§åŒ– digest + ç³»ç»Ÿ digest
- [ ] **AC-10**: æœªç™»å½•ç”¨æˆ· `GET /api/digests` ä»…è¿”å›ç³»ç»Ÿ digest
- [ ] **AC-11**: `GET /api/digests?mine=1` ä»…è¿”å›å½“å‰ç”¨æˆ·çš„ digest
- [ ] **AC-12**: `POST /api/digests` æ”¯æŒ `user_id` å‚æ•°
- [ ] **AC-13**: `GET /api/digest-status` è¿”å›æ­£ç¡®çš„è®¢é˜…å’Œ digest çŠ¶æ€

### å‰ç«¯

- [ ] **AC-14**: æ— è®¢é˜…ç”¨æˆ·çœ‹åˆ°ç©ºçŠ¶æ€å¼•å¯¼å¡ç‰‡ï¼Œå¯è·³è½¬åˆ° Packs/Sources é¡µé¢
- [ ] **AC-15**: æœ‰è®¢é˜…ä½†æ—  digest çš„ç”¨æˆ·çœ‹åˆ°"ç”Ÿæˆä¸­"ç­‰å¾…çŠ¶æ€
- [ ] **AC-16**: ä¸ªæ€§åŒ– digest å¡ç‰‡æ˜¾ç¤º "For You" æ ‡è®°
- [ ] **AC-17**: æœªç™»å½•ç”¨æˆ·çœ‹åˆ°ç³»ç»Ÿ digest + æ³¨å†Œå¼•å¯¼ banner

### Feed è¾“å‡º

- [ ] **AC-18**: `/feed/<slug>.json` å’Œ `/feed/<slug>.rss` è¾“å‡ºåŒ…å«è¯¥ç”¨æˆ·çš„ä¸ªæ€§åŒ– digest

### è¾¹ç•Œæƒ…å†µ

- [ ] **AC-19**: ç”¨æˆ·è®¢é˜…çš„æ‰€æœ‰ sources å‡é‡‡é›†å¤±è´¥ï¼ˆraw_items ä¸ºç©ºï¼‰â†’ ä¸ç”Ÿæˆç©º digestï¼Œå‰ç«¯æ˜¾ç¤ºè¯Šæ–­æç¤º
- [ ] **AC-20**: ç”¨æˆ·ä¸­é€”å˜æ›´è®¢é˜… â†’ ä¸‹æ¬¡ digest ç”Ÿæˆä½¿ç”¨æœ€æ–°è®¢é˜…
- [ ] **AC-21**: Generator è¿›ç¨‹å´©æºƒä¸å½±å“å·²ç”Ÿæˆçš„ digest å’Œ API server

---

## 10. ä¾èµ–å…³ç³»

| ä¾èµ–é¡¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| PR #15: raw_items é‡‡é›†ç®¡é“ | å¾… merge | generator.mjs ä¾èµ– `listRawItemsForDigest()` å’Œ raw_items ä¸­æœ‰æ•°æ® |
| `source_packs` è¡¨ | å·²å­˜åœ¨ | é»˜è®¤æ¨èåŒ…æœºåˆ¶ä¾èµ–æ­¤è¡¨ |
| `user_subscriptions` è¡¨ | å·²å­˜åœ¨ | digest ç”Ÿæˆä¾èµ–ç”¨æˆ·è®¢é˜…å…³ç³» |
| `digests.user_id` åˆ— | å·²å­˜åœ¨ | `004_feed.sql` å·²æ·»åŠ  |
| LLM API é…ç½® | éœ€è¦ | `LLM_API_KEY` / `LLM_API_URL` / `LLM_MODEL` ç¯å¢ƒå˜é‡ |
| Collector æŒç»­è¿è¡Œ | éœ€è¦ | raw_items è¡¨ä¸­éœ€æœ‰æ–°é²œæ•°æ®ä¾› generator æ¶ˆè´¹ |
| ç«™é•¿åˆ›å»ºé»˜è®¤æ¨èåŒ… | éœ€è¦ | éœ€è¦ Kevin åˆ›å»ºä¸€ä¸ª public pack å¹¶è®¾ä¸º `default_pack_slug` |

### åç»­é˜¶æ®µï¼ˆä¸åœ¨æœ¬æœŸèŒƒå›´ï¼‰

| åŠŸèƒ½ | å¯¹åº” Roadmap | è¯´æ˜ |
|------|-------------|------|
| subscription_hash ç¼“å­˜ | Phase 3.4 | æœ¬æœŸä»…è®°å½• hashï¼Œä¸åšç¼“å­˜å»é‡ |
| Twitter æºé‡‡é›† | Phase 1.5 | ç­‰å¾… Twitter API æ¥å…¥ |
| Telegram/Email æ¨é€ | Phase 2.1 | ä¸ªæ€§åŒ– digest ç”Ÿæˆåæ‰æœ‰æ¨é€ä»·å€¼ |
| Source æƒé‡/è´¨é‡åé¦ˆ | Phase 2.4 | éœ€è¦å…ˆæœ‰ä¸ªæ€§åŒ– digest ä½œä¸ºåé¦ˆè½½ä½“ |

---

## 11. é£é™©ä¸å¼€æ”¾é—®é¢˜

### é£é™©

| # | é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|---|------|------|---------|
| R1 | **LLM æˆæœ¬éšç”¨æˆ·æ•°çº¿æ€§å¢é•¿** | 100 ç”¨æˆ· x 6 æ¬¡/å¤© = 600 æ¬¡ LLM è°ƒç”¨/å¤© | è®°å½• subscription_hashï¼Œä¸ºåç»­ç¼“å­˜é“ºè·¯ï¼›ç›¸åŒè®¢é˜…ç»„åˆé¢„è®¡é‡å ç‡ > 80% |
| R2 | **LLM è°ƒç”¨å»¶è¿Ÿå¯¼è‡´ digest ç§¯å‹** | å¤§é‡ç”¨æˆ·åŒæ—¶åˆ°æœŸç”Ÿæˆï¼Œæ’é˜Ÿæ—¶é—´é•¿ | å¹¶å‘æ§åˆ¶ + æŒ‰ä¼˜å…ˆçº§æ’åºï¼ˆæ´»è·ƒç”¨æˆ·ä¼˜å…ˆï¼‰ |
| R3 | **raw_items æ•°æ®ä¸è¶³** | éƒ¨åˆ† source ç±»å‹ï¼ˆTwitterï¼‰æš‚æ— é‡‡é›†èƒ½åŠ› | ç³»ç»Ÿ digest ä½œä¸ºå›é€€ï¼›å‰ç«¯æ˜ç¡®æç¤ºå“ªäº›æºå¾…æ”¯æŒ |
| R4 | **é»˜è®¤æ¨èåŒ…å†…å®¹è´¨é‡** | æ–°ç”¨æˆ·é¦–å°è±¡å–å†³äºé»˜è®¤åŒ…è´¨é‡ | ç«™é•¿ç²¾å¿ƒç­–åˆ’é»˜è®¤åŒ…å†…å®¹ï¼Œå®šæœŸæ›´æ–° |
| R5 | **ç”¨æˆ·æ„ŸçŸ¥å»¶è¿Ÿ** | ç”¨æˆ·ä¿®æ”¹è®¢é˜…åéœ€ç­‰å¾…ä¸‹æ¬¡ç”Ÿæˆæ‰èƒ½çœ‹åˆ°å˜åŒ– | å‰ç«¯æ˜ç¡®æç¤º"ä¸‹æ¬¡ç®€æŠ¥å°†åæ˜ ä½ çš„æœ€æ–°è®¢é˜…" |

### å¼€æ”¾é—®é¢˜

| # | é—®é¢˜ | è®¨è®ºæ–¹å‘ |
|---|------|---------|
| Q1 | **digest ç”Ÿæˆé¢‘ç‡æ˜¯å…¨å±€ç»Ÿä¸€è¿˜æ˜¯ç”¨æˆ·å¯é…ç½®ï¼Ÿ** | æœ¬æœŸå»ºè®®å…¨å±€ç»Ÿä¸€ï¼ˆ4h/daily/weeklyï¼‰ï¼ŒPhase 2 å†å¼€æ”¾ç”¨æˆ·è‡ªå®šä¹‰ |
| Q2 | **ç³»ç»Ÿ digest å’Œç”¨æˆ· digest ä½¿ç”¨åŒä¸€ä¸ª prompt æ¨¡æ¿è¿˜æ˜¯åˆ†å¼€ï¼Ÿ** | å»ºè®®ç»Ÿä¸€æ¨¡æ¿ï¼Œä»…è¾“å…¥æ•°æ®ä¸åŒ |
| Q3 | **æ˜¯å¦éœ€è¦"ç«‹å³ç”Ÿæˆ"æŒ‰é’®è®©ç”¨æˆ·æ‰‹åŠ¨è§¦å‘ï¼Ÿ** | æˆæœ¬è€ƒè™‘å»ºè®®æœ¬æœŸä¸åšï¼ŒPhase 2 ä½œä¸º Pro åŠŸèƒ½ |
| Q4 | **LLM æœåŠ¡é€‰å‹ï¼Ÿ** | éœ€ç¡®è®¤ä½¿ç”¨å“ªå®¶ APIï¼ˆOpenAI / Anthropic / è‡ªéƒ¨ç½²ï¼‰ï¼Œä»¥ç¡®å®šç¯å¢ƒå˜é‡å’Œ SDK |
| Q5 | **subscription_hash ç¼“å­˜çš„çª—å£æœŸï¼Ÿ** | 4h digest: åŒ hash åœ¨åŒä¸€ç”Ÿæˆå‘¨æœŸå†…å…±äº«ï¼Ÿè¿˜æ˜¯è·¨å‘¨æœŸä¹Ÿå…±äº«ï¼Ÿç•™å¾… Phase 3.4 å†³ç­– |

---

*Generated by Jessie -- 2026-02-25*
